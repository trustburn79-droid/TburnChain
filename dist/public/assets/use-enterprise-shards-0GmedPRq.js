import{cH as v,u as s}from"./index-BmV5YA9a.js";import{u as c,s as C}from"./schema-veq5b3iI.js";const q=v();function M(){const{data:e,isLoading:d,error:i,refetch:u}=s({queryKey:["/api/shards"],refetchInterval:1e4}),{data:h,isLoading:l,error:p,refetch:f}=s({queryKey:["/api/admin/shards/config"],refetchInterval:3e4}),t=h??null;c({channel:"shards_snapshot",schema:C,queryKey:["/api/shards"],updateMode:"snapshot"}),c({channel:"shard_config_update",schema:q,queryKey:["/api/admin/shards/config"],updateMode:"snapshot"});const o=(t==null?void 0:t.currentShardCount)||(e==null?void 0:e.length)||8,n=(t==null?void 0:t.totalValidators)||(e==null?void 0:e.reduce((a,r)=>a+r.validatorCount,0))||200,m=(t==null?void 0:t.estimatedTps)||(e==null?void 0:e.reduce((a,r)=>a+r.tps,0))||0,g=e!=null&&e.length?e.reduce((a,r)=>a+r.load,0)/e.length:0,y=(e==null?void 0:e.filter(a=>a.status==="active").length)||o,S=Math.floor(n*2/3)+1;return{shards:e||[],config:t,isLoading:d,isConfigLoading:l,error:i,configError:p,totalShards:o,totalValidators:n,totalTps:m,avgLoad:g,activeShards:y,requiredQuorum:S,refetch:u,refetchConfig:f}}export{M as u};

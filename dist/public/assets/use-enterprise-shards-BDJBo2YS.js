import{d as s}from"./index-BvmfOamg.js";import{u as c,s as v}from"./schema-CMtmANSl.js";import{a as C}from"./types-DeR_-SxA.js";const q=C();function T(){const{data:e,isLoading:d,error:i,refetch:u}=s({queryKey:["/api/shards"],refetchInterval:1e4}),{data:h,isLoading:l,error:p,refetch:f}=s({queryKey:["/api/admin/shards/config"],refetchInterval:3e4}),t=h??null;c({channel:"shards_snapshot",schema:v,queryKey:["/api/shards"],updateMode:"snapshot"}),c({channel:"shard_config_update",schema:q,queryKey:["/api/admin/shards/config"],updateMode:"snapshot"});const o=(t==null?void 0:t.currentShardCount)||(e==null?void 0:e.length)||8,n=(t==null?void 0:t.totalValidators)||(e==null?void 0:e.reduce((a,r)=>a+r.validatorCount,0))||200,m=(t==null?void 0:t.estimatedTps)||(e==null?void 0:e.reduce((a,r)=>a+r.tps,0))||0,g=e!=null&&e.length?e.reduce((a,r)=>a+r.load,0)/e.length:0,y=(e==null?void 0:e.filter(a=>a.status==="active").length)||o,S=Math.floor(n*2/3)+1;return{shards:e||[],config:t,isLoading:d,isConfigLoading:l,error:i,configError:p,totalShards:o,totalValidators:n,totalTps:m,avgLoad:g,activeShards:y,requiredQuorum:S,refetch:u,refetchConfig:f}}export{T as u};

TBURN 메인넷의 핵심 기술과 대용량 트래픽 처리 설계를 찾았습니다. 코드베이스에서 발견한 내용을 정리해드립니다:

🏗️ TBURN 메인넷 대용량 트래픽 처리 핵심 기술
1. 병렬 샤드 블록 생산 (Parallel Shard Block Producer)
파일: server/core/pipeline/parallel-shard-block-producer.ts
24개 샤드 × 2,500 TPS/샤드 = 60,000 TPS (개발 모드)
24개 샤드 × 4,200 TPS/샤드 = 100,800 TPS (프로덕션 모드)
각 샤드가 독립적으로 블록 생산하여 진정한 수평 확장 달성
200ms(개발)/100ms(프로덕션) 블록 간격

2. 요청 쉐딩 (Request Shedder) - 과부하 방지
파일: server/core/sharding/request-shedder.ts
우선순위 기반 엔드포인트 분류: critical > high > normal > low > deferrable
적응형 이벤트 루프 지연 임계값: 100ms~400ms 범위에서 자동 조절
역압력(Backpressure) 신호: 150 RPS 임계치에서 활성화
캐시된 응답 제공: 30초 TTL로 반복 요청 처리
우아한 성능 저하: 자동 복구 기능 포함

3. 세션 바이패스 (Session Bypass) - 세션 효율화
파일: server/core/sessions/session-bypass.ts
목표: ≥95% 세션 스킵 비율 달성
최대 세션 수: 10,000개 제한
1분마다 자동 정리 실행
메모리 임계값: 경고(70%) → 긴급(85%) → 비상(95%)
봇/크롤러 자동 식별 및 스킵

4. 메모리 거버너 (Memory Governor) - 메모리 관리
파일: server/core/sharding/memory-governor.ts
예측적 메모리 압박 감지: EWMA 스무딩 적용
히스테리시스 기반 상태 전환: 2% 허용치
LRU 기반 샤드 휴면 처리
상태 단계: normal → warning(75%) → deferred(85%) → hibernating(90%) → critical(95%)
샤드당 약 15MB 메모리 예상치

5. 샤드 부트 파이프라인 (Shard Boot Pipeline) - 안정적 시작
파일: server/core/sharding/shard-boot-pipeline.ts
서킷 브레이커 패턴: 5회 연속 실패 시 회로 차단
최대 동시 활성화: 2개 샤드
5초 간격 활성화 순차 실행
재시도 로직: 지수 백오프 (2초~30초)
우아한 종료 및 드레인 지원

6. Redis 세션 관리 (Redis Session Manager)
파일: server/core/sessions/redis-session-manager.ts
자동 Redis 감지 (REDIS_URL 환경변수)
MemoryStore → Redis 자동 페일오버
자동 재연결: 지수 백오프 (최대 10회 시도)
연결 상태 모니터링 및 지연시간 추적

7. 부하 테스트 시나리오 (Soak Test Orchestrator)
파일: server/core/testing/enterprise-soak-test-orchestrator.ts
테스트 유형
동시 사용자
RPS
지속 시간
SLA 목표
Stress Test
300명
3,000
45분
P99 < 1s, 성공률 90%
Throughput
200명
2,000
30분
P99 < 500ms, 성공률 95%
Spike Test
50명 × 5배
2,500
30분
P99 < 500ms, 성공률 95%
Endurance
30명
300
8시간
P99 < 150ms, 성공률 99.9%
Chaos Test
100명
1,000
60분
P99 < 500ms, 성공률 90%


📊 설계 목표 vs 현재 성능
항목
설계 목표
현재 달성
일일 사용자
50,000명
✅ 지원
동시 접속
3,000~5,000명
✅ 지원
TPS (개발 모드)
60,000 TPS
✅ 58,000+ TPS
TPS (프로덕션)
100,000 TPS
✅ 설정됨
세션 스킵 비율
≥95%
✅ 목표치
샤드 수
24~64개 동적
✅ 24개 운영 중


이 기술들이 모두 조합되어 일 5만명 사용자, 3,000~5,000 동시 접속을 안정적으로 처리할 수 있는 엔터프라이즈급 인프라를 구성하고 있습니다.
